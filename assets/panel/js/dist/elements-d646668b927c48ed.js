(()=>{var ot=Object.defineProperty;var ut=(o,s,t)=>s in o?ot(o,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[s]=t;var r=(o,s)=>ot(o,"name",{value:s,configurable:!0});var i=(o,s,t)=>(ut(o,typeof s!="symbol"?s+"":s,t),t);/*! (c) Andrea Giammarchi - ISC */var at={};try{at.EventTarget=new EventTarget().constructor}catch{(function(s,t){var e=s.create,n=s.defineProperty,a=T.prototype;E(a,"addEventListener",function(c,O,S){for(var j=t.get(this),A=j[c]||(j[c]=[]),nt=0,ht=A.length;nt<ht;nt++)if(A[nt].listener===O)return;A.push({target:this,listener:O,options:S})}),E(a,"dispatchEvent",function(c){var O=t.get(this),S=O[c.type];return S&&(E(c,"target",this),E(c,"currentTarget",this),S.slice(0).some(rt,c),delete c.currentTarget,delete c.target),!0}),E(a,"removeEventListener",function(c,O){for(var S=t.get(this),j=S[c]||(S[c]=[]),A=0,nt=j.length;A<nt;A++)if(j[A].listener===O){j.splice(A,1);return}}),at.EventTarget=T;function T(){"use strict";t.set(this,e(null))}r(T,"EventTarget");function E(c,O,S){n(c,O,{configurable:!0,writable:!0,value:S})}r(E,"define");function rt(c){var O=c.options;return O&&O.once&&c.target.removeEventListener(this.type,c.listener),typeof c.listener=="function"?c.listener.call(c.target,this):c.listener.handleEvent(this),this._stopImmediatePropagationFlag}r(rt,"dispatch")})(Object,new WeakMap)}var I=at.EventTarget;var p=class{static async sleep(s){return new Promise(function(t,e){setTimeout(()=>t(),s)})}static async sleepUntilNextFrame(){await this.sleep(1),await new Promise(s=>{window.requestAnimationFrame(()=>s())})}};r(p,"Sleeper");var P=class{constructor(s,t,e){i(this,"startPromise");i(this,"endPromise");i(this,"endResolve");i(this,"endReject");i(this,"startResolve");i(this,"startReject");this.startPromise=s,this.startResolve=t,this.startReject=e,this.endPromise=new Promise((n,a)=>{this.endResolve=n,this.endReject=a})}waitInLine(){return this.startPromise}waitForTask(){return this.endPromise}finish(){this.endResolve()}fail(s){this.endReject(s)}start(){this.startResolve()}rejectStart(s){this.startReject(s)}};r(P,"QueueEntry");var L=class{constructor(){i(this,"entries",[]);i(this,"running",!1)}enqueueTask(){let s,t,e=new Promise((a,T)=>{s=a,t=T}),n=new P(e,s,t);return this.entries.push(n),this.start(),n}async run(s){let t=this.enqueueTask();await t.waitInLine();try{await s()}catch(e){throw t.fail(e),e}return t.finish(),this}async start(){if(this.running)return;this.running=!0;let s;for(;s=this.entries.shift();){s.start();try{await s.waitForTask()}catch{}}this.running=!1}};r(L,"AsyncQueue");var l=class extends I{constructor(t,e=null){super();i(this,"element",null);i(this,"parentElement");i(this,"childElements",null);i(this,"animationQueue",new L);if(t===null&&e===null)throw new Error("No 'tag' or 'element' defined.");typeof t=="string"?this.element=document.createElement(t):(e===null&&(e=t),this.element=this.constructor.getHTMLElementFrom(e)),this.addToRegistry()}static get(t){if(t===null)return null;let e=this.getHTMLElementFrom(t);return typeof e.domElementRegistry>"u"&&(e.domElementRegistry=new Map),e.domElementRegistry.has(this.getRegistryName())?e.domElementRegistry.get(this.getRegistryName()):new this(null,e)}static getAll(t){let e=[];for(let n of t)e.push(this.get(n));return e}static getRegistryName(){return this.name}static getHTMLElementFrom(t){return t instanceof l?t.get():t.element instanceof HTMLElement?t.element:typeof jQuery<"u"&&t instanceof jQuery?t.get(0)||null:t instanceof Node?t.nodeType!==Node.ELEMENT_NODE&&t.parentElement?t.parentElement:t:null}static select(t){let e=document.querySelector(t);return e?this.get(e):null}static selectAll(t){let e=document.querySelectorAll(t);return this.getAll(e)}static getAvailableEvents(){return[]}addToRegistry(){return typeof this.element.domElementRegistry>"u"&&(this.element.domElementRegistry=new Map),this.element.domElementRegistry.set(this.constructor.getRegistryName(),this),this}getTextNodes(){let t=[];for(let e of this.element.childNodes)e instanceof Text&&t.push(e);return t}children(t=!1){if(Array.isArray(this.childElements)&&!t)return this.childElements;this.childElements=[];for(let e of this.element.children)this.childElements.push(l.get(e));return this.childElements}parent(t=!1){return this.parentElement&&!t?this.parentElement:this.element.parentElement?this.parentElement=l.get(this.element.parentElement):null}getNextSibling(){let t=this.element.nextElementSibling;return t?l.get(t):null}getPreviousSibling(){let t=this.element.previousElementSibling;return t?l.get(t):null}get(){return this.element}removeClass(...t){return this.element.classList.remove(...t),this}addClass(...t){return this.classes(...t)}classes(...t){return this.element.classList.add(...t),this}hasClass(...t){if(!this.element.classList)return!1;for(let e of t)if(this.element.classList.contains(e))return!0;return!1}hasAllClasses(...t){if(!this.element.classList)return!1;for(let e of t)if(!this.element.classList.contains(e))return!1;return!0}id(t){return this.element.id=t,this}getId(){return this.element.id}text(t){return this.element.innerText=t,this}getText(){return this.element.textContent}getInnerText(){return this.element.innerText}type(t){return this.element.type=t,this}checked(t=!0){return this.element.checked=t,this}disabled(t=!0){return this.element.disabled=t,this}isDisabled(){return this.element.disabled}htmlFor(t){return this.element.htmlFor=t,this}href(t){return this.element.href=t,this}target(t){return this.element.target=t,this}getAttribute(t){return this.element.getAttribute(t)}setAttribute(t,e){return this.element.setAttribute(t,e),this}contentEditable(t=!0){let e=t?"true":"false";return t===null&&(e="inherit"),this.element.contentEditable=e,this}disableSpellcheck(){return this.element.setAttribute("data-gramm","false"),this.element.setAttribute("data-gramm_editor","false"),this.element.setAttribute("data-enable-grammarly","false"),this.element.setAttribute("spellcheck","false"),this}setData(t,e){return t=this.convertDataDashToCamelCase(t),this.element.dataset[t]=e,this}getData(t){return t=this.convertDataDashToCamelCase(t),this.element.dataset[t]}hasData(t){return t=this.convertDataDashToCamelCase(t),typeof this.element.dataset[t]<"u"}convertDataDashToCamelCase(t){return t.includes("-")&&(t=t.toLowerCase(),t.startsWith("data-")&&(t=t.substring(5)),t=t.replace(/-([a-z])/,(e,n)=>n.toUpperCase())),t}on(t,e,n={}){return this.constructor.getAvailableEvents().includes(t)?this.addEventListener(t,e,n):this.element.addEventListener(t,e,n),this}removeListener(t,e){return this.element.removeEventListener(t,e),this}dispatchEvent(t){typeof t=="string"&&(t=new Event(t)),this.constructor.getAvailableEvents().includes(t.type)?super.dispatchEvent(t):this.element.dispatchEvent(t)}hide(){return this.element.style.display="none",this}show(t=!0,e="block"){return t?(this.element.style.removeProperty("display"),this.isHidden()&&this.element.style.setProperty("display",e)):this.hide(),this}isVisible(){return this.getComputedStyle("display")!=="none"}async fadeIn(t=400,e="block"){return await this.animationQueue.run(async()=>{this.style("opacity","0"),this.style("transition","opacity "+t+"ms"),this.show(!0,e),await p.sleepUntilNextFrame(),this.style("opacity","1"),await p.sleep(t),this.removeStyle("transition"),await p.sleepUntilNextFrame()}),this}async fadeOut(t=400){return await this.animationQueue.run(async()=>{this.style("opacity","1"),this.style("transition","opacity "+t+"ms"),this.style("opacity","0"),await p.sleep(t),this.hide(),this.removeStyle("transition").removeStyle("opacity"),await p.sleepUntilNextFrame()}),this}async slideIn(t=400,e="block"){return await this.animationQueue.run(async()=>{this.style("visibility","hidden").show(!0,e);let n=this.getBoundingClientRect().height;this.removeStyle("visibility").hide(),this.style("height","0").style("box-sizing","border-box").style("padding-top","0").style("padding-bottom","0").style("margin-top","0").style("margin-bottom","0").style("overflow","hidden"),await p.sleepUntilNextFrame(),this.style("transition-property","height, margin, padding").style("transition-duration",t+"ms"),this.show(!0,e),await p.sleepUntilNextFrame(),this.style("height",n+"px").removeStyle("padding-top").removeStyle("padding-bottom").removeStyle("margin-top").removeStyle("margin-bottom"),await p.sleep(t),this.removeStyle("transition-property").removeStyle("transition-duration").removeStyle("box-sizing").removeStyle("height").removeStyle("overflow"),await p.sleepUntilNextFrame()}),this}async slideOut(t=400){return await this.animationQueue.run(async()=>{this.style("transition-property","height, margin, padding").style("transition-duration",t+"ms").style("box-sizing","border-box").style("height",this.getBoundingClientRect().height+"px").style("overflow","hidden"),await p.sleepUntilNextFrame(),this.style("height","0").style("padding-top","0").style("padding-bottom","0").style("margin-top","0").style("margin-bottom","0"),await p.sleep(t),this.hide(),this.removeStyle("transition-property").removeStyle("transition-duration").removeStyle("box-sizing").removeStyle("height").removeStyle("padding-top").removeStyle("padding-bottom").removeStyle("margin-top").removeStyle("margin-bottom").removeStyle("overflow"),await p.sleepUntilNextFrame()}),this}isHidden(){return this.getComputedStyle("display")==="none"}clear(){return this.element.innerHTML="",this}append(...t){for(let e of t){let n=this.getChildElementFrom(e);n&&this.element.append(n)}return this}prepend(...t){for(let e of t){let n=this.getChildElementFrom(e);n&&this.element.prepend(n)}return this}appendBefore(t,e){let n=this.getChildElementFrom(t),a=this.constructor.getHTMLElementFrom(e);return!n||!a?this:(this.element.insertBefore(n,a),this)}getChildElementFrom(t){return typeof t>"u"?null:(typeof t=="string"&&(t=document.createTextNode(t)),t instanceof Node?t:this.constructor.getHTMLElementFrom(t))}closest(t){let e=this.element.closest(t);return e===null?null:l.get(e)}find(t){let e=this.element.querySelector(t);return e===null?null:l.get(e)}findAll(t){let e=this.element.querySelectorAll(t),n=[];for(let a of e)n.push(l.get(a));return n}focus(){return this.element.focus(),this}getComputedStyle(t){return window.getComputedStyle(this.element).getPropertyValue(t)}style(t,e){return this.element.style.setProperty(t,e),this}removeStyle(t){return this.element.style[t]=null,this}contains(t){return t=this.constructor.getHTMLElementFrom(t),t?this.element.contains(t):!1}is(t){return t=this.constructor.getHTMLElementFrom(t),t?t===this.element:!1}getElementWithOffsetAtPosition(t,e=this.element){if(t===null)return null;if(e.nodeType===Node.TEXT_NODE){let n=t-e.textContent.length;return n<0?lt.get(e).setOffset(t):n}for(let n of e.childNodes)if(t=this.getElementWithOffsetAtPosition(t,n),typeof t!="number")return t;return e===this.element?null:t}remove(){this.element.remove()}removeChild(t){let e=this.constructor.getHTMLElementFrom(t);for(let n of this.element.childNodes)if(n===e)return this.element.removeChild(e),this;return this}title(t){return this.element.setAttribute("title",t),this}getBoundingClientRect(){return this.element.getBoundingClientRect()}click(){return this.element.click(),this}getScrollHeight(){return this.element.scrollHeight}getScrollWidth(){return this.element.scrollWidth}getScrollLeft(){return this.element.scrollLeft}getScrollTop(){return this.element.scrollTop}getHeight(){return this.getOffsetHeight()}getWidth(){return this.getOffsetWidth()}getClientHeight(){return this.element.clientHeight}getClientWidth(){return this.element.clientWidth}getOffsetHeight(){return this.element.offsetHeight}getOffsetWidth(){return this.element.offsetWidth}getOffsetLeft(){return this.element.offsetLeft}getOffsetTop(){return this.element.offsetTop}scrollBy(t=0,e=0,n="auto"){return this.element.scrollBy({top:e,left:t,behavior:n}),this}clone(){return this.constructor.get(this.element.cloneNode(!0))}getTagName(){return this.element.tagName}isTagName(t){return this.element.tagName.toLowerCase()===t.toLowerCase()}};r(l,"DOMElement");var lt=class extends l{constructor(){super(...arguments);i(this,"offset",0);i(this,"node",null)}static get(t){return super.get(t).setNode(t)}setNode(t){return this.node===null&&(this.node=t),this}setOffset(t){return this.offset=t,this}getOffset(){return this.offset}getNode(){return this.node}};r(lt,"DOMElementWithOffset");var D=class extends Event{constructor(t,e){super(t);i(this,"target");this.target=e}};r(D,"DOMElementEvent");var W=class extends I{constructor(t){super();i(this,"element");i(this,"start",null);i(this,"end",null);i(this,"backwards",!1);i(this,"lastStart",0);i(this,"lastEnd",0);i(this,"lastBackwards",!1);i(this,"ignoreClickClasses",[]);this.element=t,document.addEventListener("click",this.updateLastPosition.bind(this)),document.addEventListener("touchend",this.updateLastPosition.bind(this)),this.element.on("keyup",this.updateLastPosition.bind(this))}addIgnoreClickClasses(...t){return this.ignoreClickClasses.push(...t),this}getStart(){let t=this.getSelectionRange();if(!t)return null;let e=new Range;return e.setStart(this.element.get(),0),e.setEnd(t.startContainer,t.startOffset),e.toString().length}getStartElement(){if(!this.isStartInElement())return null;let t=this.getSelectionRange();return t?t.startContainer.nodeType!==Node.ELEMENT_NODE?l.get(t.startContainer.parentElement):l.get(t.startContainer):null}getEndElement(){if(!this.isEndInElement())return null;let t=this.getSelectionRange();return t?t.endContainer.nodeType!==Node.ELEMENT_NODE?l.get(t.endContainer.parentElement):l.get(t.endContainer):null}getAllElements(){let t=this.getSelectionRange();return t?this.getSelectedElementsFromElement(l.get(t.commonAncestorContainer)):[]}getSelectedElementsFromElement(t){let e=this.getSelectionRange();if(!e)return[];if((e.startContainer!==e.endContainer||e.startOffset!==e.endOffset)&&e.endOffset===0&&t.is(e.endContainer))return[];let n=[];t.getTextNodes().some(a=>a.textContent.length>0&&e.intersectsNode(a))&&n.push(t);for(let a of t.children())n.push(...this.getSelectedElementsFromElement(a));return n}getEnd(){let t=this.getSelectionRange();if(!t)return null;let e=new Range;return e.setStart(this.element.get(),0),e.setEnd(t.endContainer,t.endOffset),e.toString().length}isBackwards(){if(this.getLength()===0)return!1;let t=window.getSelection(),e=document.createRange();return e.setStart(t.anchorNode,t.anchorOffset),e.setEnd(t.focusNode,t.focusOffset),e.collapsed}setBackwards(t=!0){let e=this.getSelectionRange();if(!e)return null;t?window.getSelection().setBaseAndExtent(e.endContainer,e.endOffset,e.startContainer,e.startOffset):window.getSelection().setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset)}save(){this.start=this.isStartInElement()?this.getStart():null,this.end=this.isEndInElement()?this.getEnd():null,this.backwards=this.isBackwards()}restore(){this.start&&this.end?this.set(this.start,this.end):(this.start!==null&&this.setStart(this.start),this.end!==null&&this.setEnd(this.end)),(this.start||this.end)&&this.setBackwards(this.backwards)}getSelectionRange(){let t=window.getSelection();return t.rangeCount===0?null:t.getRangeAt(0)}isStartInElement(){let t=this.getSelectionRange();return t?this.element.is(t.startContainer)||this.element.contains(t.startContainer):!1}isEndInElement(){let t=this.getSelectionRange();return t?this.element.is(t.endContainer)||this.element.contains(t.endContainer):!1}isInElement(){return this.isStartInElement()&&this.isEndInElement()}set(t,e=t){let n=this.element.getElementWithOffsetAtPosition(t),a=n;if(t!==e&&(a=this.element.getElementWithOffsetAtPosition(e)),!n||!a)return;if(!this.getSelectionRange())return!1;this.lastStart=t,this.lastEnd=e;let E=new Range;E.setStart(n.getNode(),n.getOffset()),E.setEnd(a.getNode(),a.getOffset()),window.getSelection().removeAllRanges(),window.getSelection().addRange(E)}setStart(t){let e=this.element.getElementWithOffsetAtPosition(t);if(!e)return!1;let n=this.getSelectionRange();if(!n)return!1;this.lastStart=t;let a=new Range;return a.setStart(e.getNode(),e.getOffset()),a.setEnd(n.endContainer,n.endOffset),window.getSelection().removeAllRanges(),window.getSelection().addRange(a),!0}setEnd(t){let e=this.element.getElementWithOffsetAtPosition(t);if(!e)return!1;let n=this.getSelectionRange();if(!n)return!1;this.lastEnd=t;let a=new Range;return a.setStart(n.startContainer,n.startOffset),a.setEnd(e.getNode(),e.getOffset()),window.getSelection().removeAllRanges(),window.getSelection().addRange(a),!0}getLength(){return this.getContent().length}getContent(){let t=this.getSelectionRange();return t?t.toString():""}getLastStart(){return this.lastStart}getLastEnd(){return this.lastEnd}getLastBackwards(){return this.lastBackwards}restoreLast(){this.set(this.getLastStart(),this.getLastEnd()),this.setBackwards(this.getLastBackwards())}restoreLastStart(){return this.set(this.getLastStart())}updateLastPosition(t=null,e=!0){t&&t.target&&l.get(t.target).hasClass(...this.ignoreClickClasses)||this.isInElement()&&(this.lastStart=this.getStart(),this.lastEnd=this.getEnd(),this.lastBackwards=this.isBackwards(),this.dispatchEvent(new Event("change")),e&&setTimeout(()=>this.updateLastPosition(t,!1),500))}};r(W,"DOMElementSelection");var x=class extends I{constructor(t){super();i(this,"target");i(this,"dragCounter",0);this.target=t,this.target.addEventListener("dragenter",this.addDragover.bind(this)),this.target.addEventListener("dragleave",this.removeDragover.bind(this)),this.target.addEventListener("dragend",this.endDragover.bind(this)),this.target.addEventListener("drop",this.endDragover.bind(this)),this.constructor.preventGlobalEvents()}static getWindowHandler(){return this.windowHandler===null&&(this.windowHandler=new this(window)),this.windowHandler}static preventGlobalEvents(){this.globalPrevented||(window.addEventListener("dragover",t=>t.preventDefault()),window.addEventListener("dragenter",t=>t.preventDefault()),window.addEventListener("dragleave",t=>t.preventDefault()),window.addEventListener("drop",t=>t.preventDefault()),this.globalPrevented=!0)}removeDragover(){this.dragCounter--,!(this.dragCounter>0)&&(this.dragCounter=0,this.dispatchEvent(new Event("dragleaveOrEnd")),this.dispatchEvent(new Event("dragleave")))}addDragover(){this.dragCounter++,this.dispatchEvent(new Event("dragenter"))}endDragover(t){t.preventDefault(),this.dragCounter=0,this.dispatchEvent(new Event("dragleaveOrEnd")),this.dispatchEvent(new Event("dragend"))}};r(x,"DragEventHandler"),i(x,"windowHandler",null),i(x,"globalPrevented",!1);var w=class extends l{static getAvailableEvents(){return["dismiss"]}constructor(s="dialog",t=null){if(super(s,t),this.element.tagName.toLowerCase()!=="dialog")throw new Error("Invalid tag '"+this.element.tagName+"' given for Dialog element");this.on("click",this.handleClick.bind(this))}static isSupported(){return typeof HTMLDialogElement<"u"}open(s=!0){return s?this.element.showModal():this.element.show(),this}close(){return this.element.close(),this}onClose(s){return this.on("close",s),this}onCancel(s){return this.on("cancel",s),this}onDismiss(s){return this.on("dismiss",s),this}handleClick(s){s.target===this.element&&this.dispatchEvent("dismiss")}};r(w,"Dialog");var m=class extends l{constructor(s="input",t=null){if(super(s,t),!(this.element instanceof HTMLInputElement)&&!(this.element instanceof HTMLSelectElement)&&!(this.element instanceof HTMLTextAreaElement))throw new Error("Invalid tag '"+this.element.tagName+"' given for Input element")}onChange(s){return this.on("change",s),this}onKeyDown(s){return this.on("keydown",s),this}onKeyUp(s){return this.on("keyup",s),this}getValue(){return this.element.value}setValue(s){return this.element.value=s,this.element.dispatchEvent(new Event("change")),this}getType(){return this.element.getAttribute("type")}hasType(...s){return s.includes(this.getType())}setType(s){return this.element.setAttribute("type",s),this}};r(m,"Input"),i(m,"TYPE_PASSWORD","password"),i(m,"TYPE_TEXT","text"),i(m,"TYPE_CHECKBOX","checkbox"),i(m,"TYPE_RADIO_BUTTON","radio"),i(m,"TYPE_NUMBER","number"),i(m,"TYPE_FILE","file");var H=class extends m{constructor(s="input",t=null){if(super(s,t),s==="input"&&this.setType(this.constructor.TYPE_CHECKBOX),!(this.element instanceof HTMLInputElement)&&!this.hasType(this.constructor.TYPE_CHECKBOX))throw new Error("Invalid tag '"+this.element.tagName+"' or type '"+this.getType()+"' given for Checkbox element")}getValue(){return this.isChecked()}setValue(s){if(s!==!1&&s!==!0)throw new Error("Invalid value '"+s+"' provided for checkbox input");return this.checked(s),this}isChecked(){return this.element.checked}};r(H,"Checkbox");var Y=class extends m{static getAvailableEvents(){return["enter"]}constructor(s="input",t=null){if(super(s,t),s==="input"&&this.setType(this.constructor.TYPE_TEXT),!(this.element instanceof HTMLInputElement)&&!this.hasType(this.constructor.TYPE_TEXT,this.constructor.TYPE_NUMBER))throw new Error("Invalid tag '"+this.element.tagName+"' or type '"+this.getType()+"' given for TypeInput element");this.onKeyUp(e=>{e.key==="Enter"&&this.dispatchEvent("enter")})}onEnter(s){return this.on("enter",s),this}setPlaceholder(s){return this.setAttribute("placeholder",s),this}};r(Y,"TypeInput");var f=class extends l{constructor(t="i",e=null){super(t,e);i(this,"iconStyle",this.constructor.STYLE_SOLID);i(this,"icon","");i(this,"animation",null);i(this,"modifiers",[]);let n=!1;for(let a of this.element.classList){if(this.constructor.STYLES.includes(a)){this.iconStyle=a,n=!0;continue}if(this.constructor.ANIMATIONS.includes(a)){this.animation=a;continue}if(this.constructor.MODIFIERS.includes(a)){this.modifiers.push(a);continue}a.startsWith(this.constructor.ICON_PREFIX)&&(this.icon=a.substring(this.constructor.ICON_PREFIX.length))}n||this.setIconStyle(this.iconStyle)}getIconStyle(){return this.iconStyle}setIconStyle(t){return this.removeClass(this.iconStyle),t&&(typeof this.constructor.OLD_STYLES[t]<"u"&&(t=this.constructor.OLD_STYLES[t]),this.constructor.STYLES.includes(t)&&(this.iconStyle=t)),this.addClass(this.iconStyle),this}getIcon(){return this.icon}setIcon(t){return t.startsWith(this.constructor.ICON_PREFIX)&&(t=t.substring(this.constructor.ICON_PREFIX.length)),this.removeClass(this.constructor.ICON_PREFIX+this.icon),this.icon=t,this.addClass(this.constructor.ICON_PREFIX+this.icon),this}setFromClassString(t){for(let e of t.split(" ")){if(this.constructor.STYLES.includes(e)){this.setIconStyle(e);continue}if(this.constructor.ANIMATIONS.includes(e)){this.setAnimation(e);continue}if(this.constructor.MODIFIERS.includes(e)){this.addModifier(e);continue}e.startsWith(this.constructor.ICON_PREFIX)&&this.setIcon(e)}return this}setColor(t){return t?this.element.style.color="var(--color-"+t+")":this.element.style.color="",this}setSpinning(t){return this.setAnimation(t?this.constructor.ANIMATION_SPIN:null),this}async shakeOnce(){return this.setAnimation(this.constructor.ANIMATION_SHAKE),await p.sleep(1e3),this.setAnimation(null),this}getAnimation(){return this.animation}setAnimation(t=null){return this.animation&&this.removeClass(this.animation),t===null?(this.animation=null,this):(this.constructor.ANIMATIONS.includes(t)&&(this.animation=t,this.addClass(t)),this)}addModifier(t){return this.addClass(t),this.modifiers.includes(t)||this.modifiers.push(t),this}removeModifier(t){this.removeClass(t);let e=this.modifiers.indexOf(t);return e!==-1&&this.modifiers.splice(e,1),this}},h=f;r(h,"Icon"),i(h,"STYLE_SOLID","fa-solid"),i(h,"STYLE_REGULAR","fa-regular"),i(h,"STYLE_LIGHT","fa-light"),i(h,"STYLE_DUOTONE","fa-duotone"),i(h,"STYLE_THIN","fa-thin"),i(h,"STYLE_BRANDS","fa-brands"),i(h,"MODIFIER_FIXED_WIDTH","fa-fw"),i(h,"ANIMATION_SPIN","fa-spin"),i(h,"ANIMATION_BEAT","fa-beat"),i(h,"ANIMATION_FADE","fa-fade"),i(h,"ANIMATION_BEAT_FADE","fa-beat-fade"),i(h,"ANIMATION_BOUNCE","fa-bounce"),i(h,"ANIMATION_FLIP","fa-flip"),i(h,"ANIMATION_SHAKE","fa-shake"),i(h,"OLD_STYLES",{fas:f.STYLE_SOLID,far:f.STYLE_REGULAR,fal:f.STYLE_LIGHT,fad:f.STYLE_DUOTONE,fab:f.STYLE_BRANDS}),i(h,"STYLES",[...Object.keys(f.OLD_STYLES),f.STYLE_SOLID,f.STYLE_REGULAR,f.STYLE_LIGHT,f.STYLE_DUOTONE,f.STYLE_THIN,f.STYLE_BRANDS]),i(h,"MODIFIERS",[f.MODIFIER_FIXED_WIDTH]),i(h,"ANIMATIONS",[f.ANIMATION_SPIN,f.ANIMATION_BEAT,f.ANIMATION_FADE,f.ANIMATION_BEAT_FADE,f.ANIMATION_BOUNCE,f.ANIMATION_FLIP,f.ANIMATION_SHAKE]),i(h,"ICON_PREFIX","fa-");var g=class extends l{static fromLegacyConfig(s){let t=new g;return s.class&&t.classes(s.class.split(" ")),s.color&&t.color(s.color),s.size&&t.size(s.size),s.icon&&t.icon(s.icon,s.iconClass),s.label&&t.label(s.label),s.callback&&t.onClick(s.callback),s.callbackFunction&&t.onClick(s.callbackFunction),s.url&&t.link(s.url,s.target),t}constructor(s="button",t=null){if(super(s,t),!this.element)return;this.hasClass("btn")||this.addClass("btn"),this.buttonIcon=null;let e=this.find("i");e&&(this.buttonIcon=new h(e))}color(s){return this.constructor.COLORS.includes(s)?(this.removeClass(...this.constructor.COLOR_CLASSES),this.addClass(this.constructor.CLASS_PREFIX+s),this):this}size(s){return!this.constructor.SIZES.includes(s)&&s!==null?this:(this.removeClass(...this.constructor.SIZE_CLASSES),s!==null&&this.addClass(this.constructor.CLASS_PREFIX+s),this)}icon(s,t=null){if(!this.buttonIcon){let e=new l("i");this.prepend(e),this.buttonIcon=new h(e)}return this.buttonIcon.setIcon(s),this.buttonIcon.setIconStyle(t),this.element.textContent.trim()===""&&this.addClass("btn-notext"),this}label(s){for(let t of this.element.childNodes)t instanceof Text&&t.remove();return s?(this.removeClass("btn-notext"),this.append(s)):this.addClass("btn-notext"),this}link(s,t=null){return this.element.href=s,t&&this.target(t),this}onClick(s){return this.on("click",s)}working(){return this.addClass("btn-working"),this}disable(){return this.addClass("btn-disabled"),this}enable(s=!0){return s?this.removeClass("btn-disabled"):this.disable(),this}isWorking(){return this.hasClass("btn-working")||this.hasClass("btn-done")}isOnlyWorking(){return this.hasClass("btn-working")}async done(s=3e3){return this.removeClass("btn-working"),this.addClass("btn-done"),await p.sleep(s),this.reset(),this}reset(){return this.removeClass("btn-working","btn-done"),this}isDisabled(){return this.hasClass("btn-disabled")}},u=g;r(u,"Button"),i(u,"CLASS_PREFIX","btn-"),i(u,"COLOR_LIGHT","light"),i(u,"COLOR_DARK","dark"),i(u,"COLOR_SUCCESS","success"),i(u,"COLOR_DANGER","danger"),i(u,"COLOR_WARN","warn"),i(u,"COLOR_MAIN","main"),i(u,"COLOR_INVERTED","inverted"),i(u,"COLOR_INVISIBLE","invisible"),i(u,"SIZE_TINY","tiny"),i(u,"SIZE_SMALL","small"),i(u,"SIZE_DEFAULT",null),i(u,"SIZE_LARGE","large"),i(u,"SIZE_HUGE","huge"),i(u,"COLORS",[g.COLOR_LIGHT,g.COLOR_DARK,g.COLOR_SUCCESS,g.COLOR_DANGER,g.COLOR_WARN,g.COLOR_MAIN,g.COLOR_INVISIBLE,g.COLOR_INVERTED,"white","black","green","red","orange","blue"]),i(u,"COLOR_CLASSES",g.COLORS.map(s=>g.CLASS_PREFIX+s)),i(u,"SIZES",[g.SIZE_TINY,g.SIZE_SMALL,g.SIZE_LARGE,g.SIZE_HUGE]),i(u,"SIZE_CLASSES",g.SIZES.map(s=>g.CLASS_PREFIX+s));var R=class extends l{constructor(){super(...arguments);i(this,"select")}setSelect(t){return this.select=t,this}};r(R,"SelectElement");var N=class extends R{constructor(s="div",t=null){super(s,t),typeof s=="string"&&this.addClass("option")}getValue(){return this.getData("value")}setValue(s){return this.setData("value",s),this}getLabel(){return this.getText()}setLabel(s){return this.text(s),this}};r(N,"AbstractSelectOption");var C=class extends N{constructor(s="div",t=null){super(s,t),this.on("click",this.handleOptionClick.bind(this))}async handleOptionClick(){await this.select.setCurrentOption(this)}setValue(s){return super.setValue(s)}setLabel(s){return super.setLabel(s)}};r(C,"SelectOption");var M=class extends R{constructor(t,e=null){super(t,e);i(this,"optionListElement");i(this,"optionList",[]);i(this,"backElement");this.on("click",this.handleCategoryClick.bind(this)),this.optionListElement=this.find(".option-category-options"),this.backElement=this.optionListElement.find(".option-category-back"),this.backElement.on("click",this.hideOptionList.bind(this)),this.optionList=this.optionListElement.findAll(".option").map(n=>C.get(n).setSelect(this.select))}setSelect(t){return super.setSelect(t),this.optionList.forEach(e=>e.setSelect(t)),this}getOptionByValue(t){var e;return(e=this.optionList.find(n=>n.getValue()===t))!=null?e:null}handleCategoryClick(t){this.is(t.target)&&this.optionListElement.show()}hideOptionList(){return this.optionListElement.hide(),this}};r(M,"SelectCategory");var U=class extends N{constructor(s="div",t=null){super(s,t),t===null&&this.addClass("current")}setValue(s){return super.setValue(s)}setLabel(s){return super.setLabel(s)}};r(U,"CurrentSelectOption");var X=class extends l{constructor(t="div",e=null){super(t,e);i(this,"currentElement");i(this,"optionListElement");i(this,"opened",!1);i(this,"slideDuration",100);i(this,"optionList",[]);e===null?this.create():this.load(),this.currentElement.on("click",this.handleCurrentClick.bind(this))}static loadAll(){for(let t of l.selectAll(".select"))this.get(t);return this}load(){this.currentElement=new U(this.find(".current")),this.optionListElement=this.find(".select-options"),this.loadOptions()}create(){this.currentElement=new U().setSelect(this),this.optionListElement=new l("div").addClass("select-options"),this.addClass("select").append(this.currentElement).append(this.optionListElement)}loadOptions(){this.optionList=[];for(let t of this.optionListElement.children())t.hasClass("option-category")?this.optionList.push(M.get(t).setSelect(this)):this.optionList.push(C.get(t).setSelect(this));return this}setOptions(t){this.clearOptions();for(let[e,n]of this.optionsToMap(t))this.addOption(e,n);return this}clearOptions(){return this.optionList=[],this.optionListElement.clear(),this}addOption(t,e=t,n=!1){let a=new C().setSelect(this).setValue(t).text(e);return this.optionListElement.append(a),this.optionList.push(a),n&&this.setCurrentOption(a),this}removeOption(t){let e=this.getOptionByValue(t);return e&&(e.remove(),this.optionList.splice(this.optionList.indexOf(e),1)),this}getOptions(){return this.optionList}optionsToMap(t){return t instanceof Map?t:Array.isArray(t)?t.length===0?new Map:(Array.isArray(t[0])||(t=t.map(e=>[e,e])),new Map(t)):new Map(Object.entries(t))}isDisabled(){return super.isDisabled()||this.hasData("disabled")}isOpen(){return this.opened}onChange(t){return this.on("change",t),this}getCurrentOption(){return this.currentElement}async setCurrentOption(t){return this.setValueAndLabel(t.getValue(),t.getLabel()),this.close()}setValueAndLabel(t,e=t){return this.currentElement.setValue(t).setLabel(e),this.element.dispatchEvent(new Event("change")),this}getValue(){return this.currentElement.getValue()}setValue(t){let e=t,n=this.getOptionByValue(t);return n&&(e=n.getLabel()),this.setValueAndLabel(t,e),this}getOptionByValue(t){for(let e of this.optionList){if(e instanceof C&&e.getValue()===t)return e;if(e instanceof M){let n=e.getOptionByValue(t);if(n)return n}}return null}async handleCurrentClick(){if(!this.isDisabled())return this.isOpen()?this.close():this.open()}async open(){return this.opened=!0,await this.optionListElement.slideIn(this.slideDuration),this}async close(){return this.opened=!1,await this.optionListElement.slideOut(this.slideDuration),this.hideAllCategoryOptionLists(),this}hideAllCategoryOptionLists(){for(let t of this.optionList)t instanceof M&&t.hideOptionList();return this}};r(X,"Select");var B=class extends l{constructor(t,e=null){super(t,e);i(this,"input");i(this,"numberUpElement");i(this,"numberDownElement");e===null?this.create():this.load()}static loadAll(){for(let t of l.selectAll(".number-option"))this.get(t);return this}load(){this.input=m.get(this.find("input")),this.numberUpElement=this.find(".input-number-up").on("click",this.increase.bind(this)),this.numberDownElement=this.find(".input-number-down").on("click",this.decrease.bind(this))}create(){this.input=new m().setType(m.TYPE_NUMBER),this.numberUpElement=new l("div").addClass("input-number-up").append(new h().setIconStyle(h.STYLE_SOLID).setIcon("plus")).on("click",this.increase.bind(this)),this.numberDownElement=new l("div").addClass("input-number-down").append(new h().setIconStyle(h.STYLE_SOLID).setIcon("minus")).on("click",this.decrease.bind(this)),this.addClass("number-option").append(this.input).append(new l("div").addClass("input-number").append(this.numberUpElement).append(this.numberDownElement))}getValue(){return parseFloat(this.input.getValue())}setValue(t){return typeof t=="string"&&(t=parseFloat(t)),this.input.setValue(t),this}increase(){let t=this.getValue()+this.getStep();return this.getStep()>=1&&this.getValue()%1!==0&&(t=Math.ceil(this.getValue())),t>this.getMax()&&(t=this.getMax()),t<this.getMin()&&(t=this.getMin()),this.setValue(t),this}decrease(){let t=this.getValue()-this.getStep();return this.getStep()>=1&&this.getValue()%1!==0&&(t=Math.floor(this.getValue())),t<this.getMin()&&(t=this.getMin()),t>this.getMax()&&(t=this.getMax()),this.setValue(t),this}setStep(t){return this.input.setAttribute("step",t.toString()),this}getStep(){return parseFloat(this.input.getAttribute("step"))}getMin(){return parseFloat(this.input.getAttribute("min"))}setMin(t){return this.input.setAttribute("min",t.toString()),this}getMax(){return parseFloat(this.input.getAttribute("max"))}setMax(t){return this.input.setAttribute("max",t.toString()),this}};r(B,"NumberInput");var q=class extends u{constructor(t,e=null){super(t,e);i(this,"buttonRadio");this.onClick(this.handleButtonClick.bind(this))}handleButtonClick(){this.buttonRadio.deactivateAll(),this.activate(),this.buttonRadio.dispatchChangeEvent()}setButtonRadio(t){return this.buttonRadio=t,this}isActive(){return this.hasClass(this.constructor.CLASS_PREFIX+this.buttonRadio.activeColor)}getValue(){return this.getData("value")}activate(){return this.isActive()?this:(this.color(this.buttonRadio.activeColor),this.icon(this.buttonRadio.activeIcon),this)}deactivate(){return this.isActive()?(this.removeClass(this.constructor.CLASS_PREFIX+this.buttonRadio.activeColor),this.icon(this.buttonRadio.inactiveIcon),this):this}};r(q,"ButtonRadioButton");var K=class extends l{constructor(t,e=null){super(t,e);i(this,"activeColor",u.COLOR_MAIN);i(this,"activeIcon","dot-circle");i(this,"inactiveIcon","circle");i(this,"buttons");this.buttons=this.findAll(".btn").map(n=>q.get(n).setButtonRadio(this))}setActiveColor(t){return this.activeColor=t,this}getValue(){var t;return(t=this.buttons.find(e=>e.isActive()))==null?void 0:t.getValue()}setValue(t){var e;return this.deactivateAll(),(e=this.buttons.find(n=>n.getValue()===t))==null||e.activate(),this.dispatchChangeEvent(),this}dispatchChangeEvent(){this.dispatchEvent("change")}deactivateAll(){return this.buttons.forEach(t=>t.deactivate()),this}};r(K,"ButtonRadio");var k=class extends l{constructor(t,e=null){super(t,e);i(this,"alertContainer");i(this,"currentAlert",null);this.alertContainer=this.find(".alert-container"),this.on("click",this.handleClick.bind(this))}static load(){return this.select(".alert-wrapper")}async handleClick(t){(this.is(t.target)||this.alertContainer.is(t.target))&&(this.currentAlert?await this.currentAlert.hide():await this.fadeOut())}setCurrentAlert(t){return this.currentAlert=t,this}getCurrentAlert(){return this.currentAlert}};r(k,"AlertWrapper");var Z=class extends l{constructor(t,e=null){super(t,e);i(this,"itemIcon",null);i(this,"dropdown");this.addClass("dropdown-item").on("click",this.handleClick.bind(this)),e!==null&&this.load()}load(){let t=this.find("i");t!==null&&(this.itemIcon=h.get(t))}icon(t,e=null){return this.itemIcon||this.prepend(this.itemIcon=new h),this.itemIcon.setIcon(t).setIconStyle(e).addModifier(h.MODIFIER_FIXED_WIDTH),this}label(t){for(let e of this.element.childNodes)e instanceof Text&&e.remove();return this.append(t),this}getIcon(){return this.itemIcon}getLabel(){return this.getText()}setDropdown(t){return this.dropdown=t,this}handleClick(){this.dropdown.dispatchSelectEvent(this)}};r(Z,"DropdownItem");var Q=class extends l{constructor(t,e=null){super(t,e);i(this,"button");i(this,"items");i(this,"itemListElement");e===null?this.create():this.load(),this.button.onClick(this.toggle.bind(this))}static getAvailableEvents(){return["select"]}load(){this.button=u.get(this.find(".btn")),this.itemListElement=this.find(".dropdown-items"),this.loadItems()}create(){this.addClass("dropdown-wrapper").append(this.button=new u("div")).append(this.itemListElement=new l("div").addClass("dropdown-items").hide())}loadItems(){this.items=[];for(let t of this.itemListElement.children())this.items.push(Z.get(t).setDropdown(this));return this}addItem(t){return this.items.push(t.setDropdown(this)),this.itemListElement.append(t),this}icon(t,e=null){return this.button.icon(t,e),this}label(t){return this.button.label(t),this}size(t){return this.button.label(t),this}color(t){return this.button.color(t),this}disable(){return this.button.disable(),this}enable(t=!0){return this.button.enable(t),this}onSelect(t){return this.on("select",t),this}dispatchSelectEvent(t){this.dispatchEvent(new D("select",t)),this.close()}async open(){return this.addClass("dropdown-open"),await this.itemListElement.slideIn(100),this}async close(){return this.removeClass("dropdown-open"),await this.itemListElement.slideOut(100),this}async toggle(){if(this.hasClass("dropdown-open"))return this.close();if(!this.button.isDisabled())return this.open()}getButton(){return this.button}};r(Q,"ButtonDropdown");var F=class{constructor(s,t){i(this,"name");i(this,"icon");this.name=s,this.icon=t}getName(){return this.name}getIcon(){return this.icon}};r(F,"Theme");var z=class{constructor(s,t=!0){i(this,"key");this.key=t?COOKIE_PREFIX+"_"+s:s}getValue(){let s=document.cookie.split(";");for(let t of s)if(t.trim().startsWith(this.key+"="))return t.trim().substring(this.key.length+1);return null}setValue(s,t=null){let e="";if(t){let n=new Date;n.setTime(n.getTime()+t*24*60*60*1e3),e=";expires="+n.toUTCString()}return document.cookie=this.key+"="+(s||"")+e+";path=/",this}};r(z,"Cookie");var y=class extends l{constructor(t="div",e=null){super(t,e);i(this,"icon");this.icon=h.get(this.find("i")),this.on("click",this.handleClick.bind(this))}static loadAll(){this.getToggles()}static getToggles(){return this.toggles===null&&(this.toggles=this.selectAll(".js-darkmode-toggle")),this.toggles}static getThemeRoot(){return this.themeRoot===null&&(this.themeRoot=l.select("#theme-switch")),this.themeRoot}getCurrentTheme(){for(let t of this.constructor.themes)if(this.constructor.getThemeRoot().hasClass(t.getName()))return t;return this.constructor.themes[0]}getNextTheme(){let t=this.getCurrentTheme(),e=this.constructor.themes.indexOf(t)+1;return e>=this.constructor.themes.length&&(e=0),this.constructor.themes[e]}setIcon(t){return this.icon.setIcon(t.getIcon()),this}setTheme(t){return this.constructor.getThemeRoot().removeClass(this.getCurrentTheme().getName()),this.constructor.getThemeRoot().addClass(t.getName()),this.constructor.getToggles().forEach(e=>e.setIcon(t)),new z("STYLE").setValue(t.getName(),10*365),this}handleClick(){this.setTheme(this.getNextTheme())}};r(y,"ThemeToggle"),i(y,"themes",[new F("default","sun"),new F("dark","moon"),new F("dark-auto","magic")]),i(y,"toggles",null),i(y,"themeRoot",null);var b=class extends l{constructor(t="div",e=null){super(t,e);i(this,"optionsList");i(this,"labelElement");e===null?this.create():this.load()}create(){this.element=new l("div").classes("option").append(this.labelElement=new l("span").classes("label")).get()}load(){this.labelElement=this.find(".label")}setOptionsList(t){return this.optionsList=t,this}getValue(){return this.getData("value")}setValue(t){return this.setData("value",t),this}getLabel(){return this.labelElement.getText().trim()}getOptionsList(){return this.optionsList}setLabel(t){return this.labelElement.text(t),this}};r(b,"MultiSelectOption");var V=class extends l{constructor(t="div",e=null){super(t,e);i(this,"multiSelect");i(this,"options",[]);e===null?this.create():this.load()}setMultiSelect(t){return this.multiSelect=t,this}getMultiSelect(){return this.multiSelect}hasOption(t){t instanceof b&&(t=t.getValue());for(let e of this.options)if(e.getValue()===t)return!0;return!1}addOption(t,e=!1){let n=new(this.getOptionClass());return typeof t=="string"?t=n.setValue(t).setLabel(t):t=n.setValue(t.getValue()).setLabel(t.getLabel()),t.setOptionsList(this),this.options.push(t),e?this.prepend(t):this.append(t),t}removeOption(t){for(let e=0;e<this.options.length;e++)if(this.options[e].getValue()===t||this.options[e]===t){this.removeChild(this.options[e]),this.options.splice(e,1);return}}getOptionClass(){return b}getOption(t){for(let e of this.options)if(e.getValue()===t)return e;return null}create(){throw new Error("Not implemented")}load(){this.options=this.findAll(".option").map(t=>this.getOptionClass().get(t).setOptionsList(this))}};r(V,"MultiSelectOptionsList");var J=class extends b{static getAvailableEvents(){return["select"]}constructor(s="div",t=null){super(s,t),this.on("click",this.handleClick.bind(this))}handleClick(){this.select()}select(){let s=this.getOptionsList();return s.unfocus(),s.getMultiSelect().getCurrentOptions().addOption(this),s.updateAvailableOptionsFromCurrentOptions(),s.getMultiSelect().getTextInput().resetTyped(),this.dispatchEvent("select"),s.getMultiSelect().dispatchEvent("change"),this}focus(){return this.getOptionsList().unfocus(),this.getOptionsList().setFocusOption(this),this.addClass("focus"),this}unfocus(){return this.removeClass("focus"),this}hasFocus(){return this.hasClass("focus")}getOptionsList(){return super.getOptionsList()}};r(J,"MultiSelectAvailableOption");var $=class extends V{constructor(){super(...arguments);i(this,"focusOption",null);i(this,"options",this.options)}getOptionClass(){return J}unfocus(){this.setFocusOption(null),this.options.forEach(t=>t.unfocus())}refocus(){this.getMultiSelect().getTextInput().hasTyped()&&(this.focusOption===null&&(this.focusOption=this.getFirstVisibleOption()),this.focusOption!==null&&this.focusOption.focus())}selectFocus(){this.focusOption!==null&&this.focusOption.select()}setFocusOption(t){return this.focusOption=t,this}focusNext(){var e;let t=!1;for(let n of this.options){if(n.hasFocus()){t=!0;continue}if(n.isVisible()&&t){n.focus();return}}(e=this.getFirstVisibleOption())==null||e.focus()}focusPrevious(){let t=this.getLastVisibleOption();if(t!==null){for(let e of this.options){if(e.hasFocus()){t.focus();return}e.isVisible()&&(t=e)}t.focus()}}getFirstVisibleOption(){for(let t of this.options)if(t.isVisible())return t;return null}getLastVisibleOption(){let t=null;for(let e of this.options)e.isVisible()&&(t=e);return t}async showList(){this.isVisible()||(this.updateAvailableOptionsFromCurrentOptions(),this.refocus(),await this.slideIn(100))}async hideList(){await this.slideOut(100)}updateAvailableOptionsFromCurrentOptions(){for(let t of this.options)this.getMultiSelect().getCurrentOptions().hasOption(t)?t.hide():t.show()}};r($,"MultiSelectAvailableOptionsList");var tt=class extends b{constructor(s="div",t=null){super(s,t),this.on("click",this.handleClick.bind(this))}handleClick(){this.getOptionsList().removeOption(this),this.getOptionsList().getMultiSelect().dispatchEvent("change")}create(){super.create(),this.append(new l("div").classes("option-disable").append(new h().setIcon("times")))}};r(tt,"MultiSelectCurrentOption");var et=class extends V{getOptionClass(){return tt}append(s){return this.appendBefore(s,this.getMultiSelect().getTextElement()),this}removeLastOption(){return this.removeOption(this.options[this.options.length-1]),this}removeOption(s){super.removeOption(s),this.getMultiSelect().getAvailableOptions().updateAvailableOptionsFromCurrentOptions(),this.getMultiSelect().getAvailableOptions().refocus()}getValues(){return this.options.map(s=>s.getValue())}setValues(s){for(let t of this.options.slice())this.removeOption(t);if(typeof s=="string"&&(s=s.split(this.getMultiSelect().getSplitChar())),Array.isArray(s)){for(let t of s){if(t==="")continue;let e=this.getMultiSelect().getAvailableOptions().getOption(t);e||(e=new(this.getOptionClass())().setValue(t).setLabel(t)),this.addOption(e)}return this.getMultiSelect().getAvailableOptions().updateAvailableOptionsFromCurrentOptions(),this}for(let[t,e]of Object.entries(s)){let n=new(this.getOptionClass());n.setValue(t),n.setLabel(e),this.addOption(n)}return this.getMultiSelect().getAvailableOptions().updateAvailableOptionsFromCurrentOptions(),this}};r(et,"MultiSelectCurrentOptionsList");var st=class extends Y{constructor(t="input",e=null){super(t,e);i(this,"multiSelect");i(this,"focusOutTimeout",null);i(this,"customOption",null);i(this,"typed",!1);this.on("focusin",this.handleFocusIn.bind(this)),this.on("focusout",this.handleFocusOut.bind(this)),this.on("keyup",this.handleKeyUp.bind(this)),this.on("keydown",this.handleKeyDown.bind(this))}async handleKeyDown(t){if(t.key==="Backspace"&&this.getValue().length===0){this.getMultiSelect().getCurrentOptions().removeLastOption(),this.getMultiSelect().dispatchEvent("change");return}if(t.key==="ArrowUp"){this.getMultiSelect().getAvailableOptions().focusPrevious(),t.preventDefault();return}if(t.key==="ArrowDown"){this.getMultiSelect().getAvailableOptions().focusNext(),t.preventDefault();return}t.key===this.getMultiSelect().getSplitChar()&&(t.preventDefault(),this.handleEnter())}hasTyped(){return this.typed}resetTyped(){return this.typed=!1,this}async handleKeyUp(t){if(t.key==="Enter"){this.handleEnter();return}if(this.getValue().trim()===""){this.hasClass("has-content")&&this.removeClass("has-content"),this.customOption&&(this.getMultiSelect().getAvailableOptions().removeOption(this.customOption),this.customOption=null);return}this.hasClass("has-content")||this.addClass("has-content"),this.typed||(this.typed=!0,this.getMultiSelect().getAvailableOptions().refocus()),this.customOption===null?(this.customOption=this.getMultiSelect().getAvailableOptions().addOption(this.getValue(),!0),this.customOption.focus(),this.customOption.on("select",this.handleCustomElementSelect.bind(this))):this.customOption.setValue(this.getValue()).setLabel(this.getValue())}async handleCustomElementSelect(){this.getMultiSelect().getAvailableOptions().removeOption(this.customOption),this.customOption=null,this.setValue(""),this.hasClass("has-content")&&this.removeClass("has-content")}handleEnter(){this.getMultiSelect().getAvailableOptions().selectFocus()}getMultiSelect(){return this.multiSelect}async handleFocusIn(){this.focusOutTimeout!==null&&clearTimeout(this.focusOutTimeout),await this.getMultiSelect().getAvailableOptions().showList()}async handleFocusOut(){this.focusOutTimeout!==null&&clearTimeout(this.focusOutTimeout),this.focusOutTimeout=setTimeout(async()=>{await this.getMultiSelect().getAvailableOptions().hideList()},200)}setMultiSelect(t){return this.multiSelect=t,this}};r(st,"MultiSelectTextInput");var G=class extends l{constructor(t="div",e=null){super(t,e);i(this,"availableOptions");i(this,"currentOptions");i(this,"textInput");i(this,"textElement");i(this,"splitChar",",");e===null?this.create():this.load(),this.on("click",this.handleClick.bind(this))}static loadAll(){return this.selectAll(".multiselect")}handleClick(){this.textInput.focus()}create(){throw new Error("Not implemented")}getCurrentOptions(){return this.currentOptions}getTextInput(){return this.textInput}getTextElement(){return this.textElement}getAvailableOptions(){return this.availableOptions}getSplitChar(){return this.splitChar}load(){this.hasData("split-char")&&(this.splitChar=this.getData("split-char")),this.textElement=this.find(".multiselect-text"),this.textInput=st.get(this.textElement.find("input")).setMultiSelect(this),this.currentOptions=et.get(this.find(".multiselect-input")).setMultiSelect(this),this.availableOptions=$.get(this.find(".multiselect-options")).setMultiSelect(this)}getValue(){return this.getCurrentOptions().getValues().join(this.getSplitChar())}setValue(t){return this.getCurrentOptions().setValues(t),this}};r(G,"MultiSelect");var _=class{static getVariable(s,t={}){var n;let e=(n=LANGUAGE_VARIABLES[s])!=null?n:null;e||(e=s),e=e.replace(/\n/,"");for(let a of Object.keys(t))e=e.replace("{{"+a+"}}",t[a]);return e}static getDOMVariable(s,t={}){var T;let e=(T=LANGUAGE_VARIABLES[s])!=null?T:null;e||(e=s);let n=[],a=e.split(/\{\{([a-zA-Z0-9_]+)\}\}/);for(let E=0;E<a.length;E++){let rt=a[E];if(E%2===0)n.push(document.createTextNode(rt));else{let c=t[rt];c instanceof l?n.push(c):n.push(document.createTextNode(c))}}return n}};r(_,"Language");var it=class extends u{constructor(){super(...arguments);i(this,"alert")}setAlert(t){return this.alert=t,this}};r(it,"AlertButton");var v=class extends I{constructor(){super();i(this,"queueEntry",null);i(this,"element");i(this,"titleElement");i(this,"bodyElement");i(this,"mainElement");i(this,"closeButtonElement");i(this,"locked",!1);i(this,"dismissable",!0);this.element=new w().classes("alert").onClose(this.handleClose.bind(this)).onCancel(this.handleCancel.bind(this)).onDismiss(this.handleDismiss.bind(this)).append(new l("header").append(this.titleElement=new l("span").classes("alert-title")).append(this.closeButtonElement=new l("span").classes("alert-close").title(_.getVariable("close")).on("click",()=>this.hide()).append(new h().setIcon("times-circle")))).append(this.mainElement=new l("main").append(this.bodyElement=new l("div").classes("alert-body")).append(this.buttonListElement=new l("div").classes("alert-buttons","btn-group")))}static getAlertContainer(){return this.alertContainer||(this.alertContainer=l.select(".alert-container")),this.alertContainer}static getAlertWrapper(){return this.alertWrapper||(this.alertWrapper=k.load()),this.alertWrapper}static getDialogRoot(){return this.dialogRoot||(this.dialogRoot=l.select("body")),this.dialogRoot}setLocked(t){return this.locked=t,this}setDismissable(t){return this.dismissable=t,this.closeButtonElement.show(t),this}setColor(t){if(!this.constructor.COLORS.includes(t))throw new Error("Invalid color!");return this.element.removeClass(...this.constructor.COLORS),this.element.addClass(t),this}setWidth(t){if(!this.constructor.ALERT_WIDTHS.includes(t))throw new Error("Invalid width!");return this.element.removeClass(...this.constructor.ALERT_WIDTHS),this.element.addClass(t),this}setNoOverflow(t=!0){return t?this.element.addClass(this.constructor.OPTION_NO_OVERFLOW):this.element.removeClass(this.constructor.OPTION_NO_OVERFLOW),this}addClass(t){return this.element.addClass(t),this}setTitle(t){return this.titleElement.text(t),this}setText(t){return this.bodyElement.clear(),this.bodyElement.text(t),this}setBody(t){return this.bodyElement.clear(),this.appendToBody(t),this}appendToBody(...t){return this.bodyElement.append(...t),this}addButton(t){return t instanceof it&&t.setAlert(this),this.buttonListElement.append(t),this}getMainElement(){return this.mainElement}async show(t=!0,e=400){var a;if(!t)return this.hide(e);if((a=this.queueEntry)==null||a.finish(),this.queueEntry=this.constructor.alertQueue.enqueueTask(),await this.queueEntry.waitInLine(),w.isSupported())return this.element.hide(),this.constructor.getDialogRoot().append(this.element),this.element.open(),await this.element.fadeIn(e),this;this.constructor.getAlertWrapper().setCurrentAlert(this);let n=this.constructor.getAlertContainer();return n.contains(this.element)||(n.clear(),n.append(this.element)),e===0?await this.constructor.getAlertWrapper().show():await this.constructor.getAlertWrapper().fadeIn(e),this}async hide(t=400){var n,a;if(this.locked)return this;if(Number.isInteger(t)||(t=400),w.isSupported())return this.element.addClass("closing"),await this.element.fadeOut(t),this.element.close(),this.element.remove(),this.element.removeClass("closing"),(n=this.queueEntry)==null||n.finish(),this;let e=await this.constructor.getAlertWrapper();return t===0?await this.constructor.getAlertWrapper().hide():await this.constructor.getAlertWrapper().fadeOut(t),e.getCurrentAlert()===this&&e.setCurrentAlert(null),(a=this.queueEntry)==null||a.finish(),this}async wait(){var t;return await((t=this.queueEntry)==null?void 0:t.waitForTask()),this}async handleClose(){var t;this.dismissable&&(w.isSupported()&&this.element.remove(),(t=this.queueEntry)==null||t.finish())}async handleCancel(t){t.preventDefault(),this.dismissable&&await this.hide()}async handleDismiss(){this.dismissable&&await this.hide()}},d=v;r(d,"Alert"),i(d,"COLOR_SUCCESS","alert-success"),i(d,"COLOR_WARN","alert-warn"),i(d,"COLOR_DANGER","alert-danger"),i(d,"COLOR_MAIN","alert-main"),i(d,"COLOR_LIGHT","alert-light"),i(d,"COLORS",[v.COLOR_SUCCESS,v.COLOR_WARN,v.COLOR_DANGER,v.COLOR_MAIN,v.COLOR_LIGHT]),i(d,"WIDTH_NARROW","alert-narrow"),i(d,"WIDTH_MEDIUM_NARROW","alert-medium-narrow"),i(d,"WIDTH_MEDIUM","alert-medium"),i(d,"WIDTH_MEDIUM_WIDE","alert-medium-wide"),i(d,"WIDTH_UNSET","alert-unset-width"),i(d,"WIDTH_WIDE","alert-wide"),i(d,"ALERT_WIDTHS",[v.WIDTH_NARROW,v.WIDTH_MEDIUM_NARROW,v.WIDTH_MEDIUM,v.WIDTH_MEDIUM_WIDE,v.WIDTH_WIDE,v.WIDTH_UNSET]),i(d,"OPTION_NO_OVERFLOW","alert-no-overflow"),i(d,"alertContainer"),i(d,"alertWrapper"),i(d,"dialogRoot"),i(d,"alertQueue",new L);self.DOMElement=l;self.DOMElementSelection=W;self.Button=u;self.Icon=h;self.Input=m;self.Checkbox=H;self.Select=X;self.NumberInput=B;self.ButtonRadio=K;self.ButtonDropdown=Q;self.MultilSelect=G;self.Language=_;self.Alert=d;self.addEventListener("DOMContentLoaded",()=>{X.loadAll(),B.loadAll(),k.load(),y.loadAll(),G.loadAll()});})();
